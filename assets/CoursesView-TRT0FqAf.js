import{_ as L,a as p,L as P,m as h,A as j,c as o,d as m,b as t,w as F,F as _,i as g,l as x,v as O,r as b,o as a,h as f,n as V,e as v,t as l,p as M,j as N,f as S}from"./index-p6O227c0.js";import{c as u}from"./cartStore-qZAABGT3.js";import{P as A}from"./PaginationComponent-IeYYtlhP.js";import{F as B}from"./FakeDataStore-oZqDuNgi.js";import{g as k}from"./GetDataStore-Bt_fYzw8.js";import"./sweetalert2.all-DAg9cmO9.js";import"./AlertStore-dF7BXcaC.js";const U="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='currentColor'%20class='bi%20bi-bookmark'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='%23FFFFFF'%20opacity='1.000000'%20stroke='none'%20d='M2%202a2%202%200%200%201%202-2h8a2%202%200%200%201%202%202v13.5a.5.5%200%200%201-.777.416L8%2013.101l-5.223%202.815A.5.5%200%200%201%202%2015.5zm2-1a1%201%200%200%200-1%201v12.566l4.723-2.482a.5.5%200%200%201%20.554%200L13%2014.566V2a1%201%200%200%200-1-1z'/%3e%3c/svg%3e",z={data(){return{url:"",path:"",products:[],coach:[],sortOrder:"asc",category:"全部課程",categorys:["全部課程","瑜珈","有氧運動","重量訓練"],isLoading:!0}},methods:{pushPage(e){this.$router.push(`course/${e}`)},checkCategory(e){this.category=e},matchingKey(e){const c=Object.keys(this.coaches).find(r=>r===e);return c?this.coaches[c].avatarUrl:""},...p(u,["addCart"]),...p(k,["getRemoteData"]),...p(u,["getCarts"])},components:{Loading:P,PaginationComponent:A},computed:{filteredProducts(){let e=this.products;return this.category!=="全部課程"&&(e=e.filter(c=>c.category===this.category)),this.coach.length!==0&&(e=e.filter(c=>this.coach.includes(c.coach))),this.sortOrder==="asc"?e.sort((c,r)=>c.price-r.price):e.sort((c,r)=>r.price-c.price),e},...h(u,["status"]),...h(u,["carts"]),...h(k,["targetData"]),...h(B,["coaches"])},watch:{targetData(e){this.products=e},filteredProducts(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},500)}},mounted(){this.url="https://vue3-course-api.hexschool.io/v2/",this.path="gymplus",j.init({}),this.getCarts(),this.getRemoteData("products",1),setTimeout(()=>{this.isLoading=!1},1500)}},T={class:"bg-white",style:{"min-height":"100vh"}},E=t("div",{class:"banner",style:{"background-image":"url('https://images.unsplash.com/photo-1561214078-f3247647fc5e?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')"}},null,-1),H={class:"container-lg rounded-bottom"},K={"aria-label":"breadcrumb",class:"mt-5"},G={class:"breadcrumb"},I={class:"breadcrumb-item"},R=t("li",{class:"breadcrumb-item active","aria-current":"page"},"購買課程",-1),q={class:"row justify-content-center"},W={class:"btn-group mb-4 mx-auth col-12 col-lg-6"},Y=["onClick"],J={class:"accordion",id:"accordionExample"},Q={class:"accordion-item"},X=t("h2",{class:"accordion-header",id:"headingOne"},[t("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"}," 進一步指定你的教練 ")],-1),Z={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},$={class:"accordion-body"},tt={class:"row row-cols-1 row-cols-lg-5 gy-3 gy-md-0"},st={class:"form-check d-flex align-items-center"},et=["value","id"],ot=["for"],at=["src"],ct={class:"row justify-content-end align-items-center my-3"},it={class:"col-12 col-md-5"},nt={class:"row justify-content-end align-items-center"},lt=t("div",{class:"col-12 col-md-auto"},[t("label",{for:"class",class:"mx-2"},"排序方式")],-1),rt={class:"col-12 col-md-6"},dt=t("option",{value:"asc"},"價格由低到高",-1),ht=t("option",{value:"desc"},"價格由高到低",-1),_t=[dt,ht],ut={key:0,class:"row row-cols-1 row-cols-lg-3 g-5 gx-lg-4"},pt={class:"card shadow-sm"},mt=t("button",{type:"button",class:"position-absolute bookmark btn btn-dark rounded-circle border-0 align-self-start p-2 p-lg-3 ms-auto"},[t("img",{src:U,alt:"bookmark"})],-1),gt=["onClick"],bt=["src","alt"],ft={class:"card-img-overlay d-flex flex-column justify-content-between"},vt={class:"d-flex overlay-text"},yt=["src"],xt={class:"font-bold text-white"},kt={class:"card-body d-flex justify-content-between align-items-center"},wt={key:0,class:"d-flex flex-column"},Ct={class:"card-text mb-0"},Dt={class:"card-text mb-0"},Lt={class:"text-decoration-line-through"},Pt={key:1,class:"d-flex flex-column"},jt={class:"card-text mb-0"},Ft=t("p",{class:"card-text mb-0"},"免費",-1),Ot={key:2,type:"button",class:"btn btn-primary",disabled:""},Vt=["disabled","onClick"],Mt={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},Nt=t("span",{class:"visually-hidden"},"Loading...",-1),St=[Nt],At={key:1},Bt=t("h5",null,"未查詢到此篩選結果",-1),Ut=[Bt],zt={key:2,class:"d-flex justify-content-center mt-5"},Tt={key:3,class:"d-flex justify-content-center mt-5"},Et=S('<nav aria-label="Page navigation example"><ul class="pagination"><li class="page-item disabled"><a class="page-link" href="#" aria-label="Previous"><span aria-hidden="true">«</span></a></li><li class="page-item"><a class="page-link active" href="#">1</a></li><li class="page-item disabled"><a class="page-link" href="#" aria-label="Next"><span aria-hidden="true">»</span></a></li></ul></nav>',1),Ht=[Et];function Kt(e,c,r,Gt,i,d){const w=b("Loading"),C=b("router-link"),D=b("PaginationComponent");return a(),o(_,null,[m(w,{active:i.isLoading},null,8,["active"]),t("div",T,[E,t("main",H,[t("nav",K,[t("ol",G,[t("li",I,[m(C,{to:"/",class:"mx-2"},{default:F(()=>[f("首頁")]),_:1})]),R])]),t("div",q,[t("div",W,[(a(!0),o(_,null,g(i.categorys,(s,n)=>(a(),o("button",{type:"button",class:V(["btn btn-primary",{active:s===i.category}]),key:n,onClick:v(y=>d.checkCategory(s),["prevent"])},l(s),11,Y))),128))])]),t("div",J,[t("div",Q,[X,t("div",Z,[t("div",$,[t("div",tt,[(a(!0),o(_,null,g(e.coaches,(s,n)=>(a(),o("div",{class:"col d-flex justify-content-start",key:n},[t("div",st,[x(t("input",{class:"form-check-input",type:"checkbox",value:s.name,id:s.name,"onUpdate:modelValue":c[0]||(c[0]=y=>i.coach=y)},null,8,et),[[M,i.coach]]),t("label",{class:"form-check-label px-2",for:s.name},l(s.name),9,ot),t("img",{src:s.avatarUrl,alt:"course.coach",class:"rounded-circle",style:{width:"40px"}},null,8,at)])]))),128))])])])])]),t("div",ct,[t("div",it,[t("div",nt,[lt,t("div",rt,[x(t("select",{class:"form-select","aria-label":"Disabled select example",id:"class","onUpdate:modelValue":c[1]||(c[1]=s=>i.sortOrder=s)},_t,512),[[O,i.sortOrder]])])])])]),d.filteredProducts.length!==0?(a(),o("section",ut,[(a(!0),o(_,null,g(d.filteredProducts,s=>(a(),o("div",{class:"col","data-aos":"zoom-in",key:s.id},[t("div",pt,[mt,t("a",{href:"#",class:"position-relative ground-floor",onClick:v(n=>d.pushPage(s.id),["prevent"])},[t("img",{src:s.imageUrl,class:"card-img-top",style:{height:"350px","object-fit":"cover"},alt:s.content},null,8,bt),t("div",ft,[t("div",vt,[t("img",{src:d.matchingKey(s.coach),alt:"user",class:"overlay-img m-2"},null,8,yt),t("h6",xt,l(s.coach)+" 教練",1)])])],8,gt),t("div",kt,[s.price!==0?(a(),o("div",wt,[t("p",Ct,l(s.title),1),t("p",Dt,[f(" NT$ "+l(s.price)+" ",1),t("span",Lt,l(s.origin_price),1)])])):(a(),o("div",Pt,[t("p",jt,l(s.title),1),Ft])),this.carts.some(n=>n.product_id===s.id)?(a(),o("button",Ot,"已加入購物車")):(a(),o("button",{key:3,type:"button",class:"btn btn-primary",disabled:e.status.loadingItem===s.id,onClick:v(n=>e.addCart(s.id,s.title),["prevent"])},[e.status.loadingItem===s.id?(a(),o("div",Mt,St)):N("",!0),f(" 加入購物車")],8,Vt))])])]))),128))])):(a(),o("section",At,Ut)),d.filteredProducts.length!==0?(a(),o("section",zt,[m(D,{"now-target":"products",isUser:!0})])):(a(),o("section",Tt,Ht))])])],64)}const Xt=L(z,[["render",Kt]]);export{Xt as default};

import{u as r,x as a}from"./index-UaXM0k-N.js";import{s as e}from"./sweetalert2.all-KJ4JeXUd.js";const c=r("cart",{state:()=>({url:"https://vue3-course-api.hexschool.io/v2/",path:"gymplus",carts:[],total:0,final_total:0,isLoading:!1,status:{loadingItem:""}}),actions:{getCarts(){this.isLoading=!0,this.carts=[],a.get(`${this.url}api/${this.path}/cart`).then(s=>{this.carts=s.data.data.carts,this.total=this.carts.reduce((t,i)=>t+parseInt(i.total,10),0),this.final_total=this.carts.reduce((t,i)=>t+parseInt(i.final_total,10),0),setTimeout(()=>{this.isLoading=!1},1e3)})},addCart(s,t){this.status.loadingItem=s;const i={product_id:s,qty:1};a.post(`${this.url}api/${this.path}/cart`,{data:i}).then(()=>{e.fire({icon:"success",title:"課程新增",text:`已成功新增${t}課程`,showConfirmButton:!1,timer:1500}),this.getCarts(),setTimeout(()=>{this.status.loadingItem=""},1500)})},delCart(s,t){e.fire({icon:"warning",title:"確定刪除課程?",text:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定"}).then(i=>{i.isConfirmed&&a.delete(`${this.url}api/${this.path}/cart/${s}`).then(o=>{e.fire({icon:"success",title:o.data.message,showConfirmButton:!1,timer:1500}),setTimeout(()=>{this.isLoading=!0,this.getCarts()},1500)})})},delAllCart(){e.fire({icon:"warning",title:"確定刪除全部課程?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定"}).then(s=>{s.isConfirmed&&a.delete(`${this.url}api/${this.path}/carts`).then(t=>{e.fire({icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}),setTimeout(()=>{this.isLoading=!0,this.getCarts()},1500)})})}}});export{c};

import{a as $,m as D,M as S,_ as U,o as l,c as i,b as s,t as a,l as d,q as m,v as E,F as p,i as h,n as w,p as k,j as y,O as x,h as g,d as C,r as M}from"./index-d6ePCIf6.js";import{g as I}from"./GetDataStore-85IatuIu.js";import{a as _}from"./AdminCourseStore-Llwv1tMK.js";import{P as A}from"./PaginationComponent-OaJxfX22.js";import{f as T}from"./flatpickr-AUYHLChs.js";import"./AlertStore-t-u7Dtg6.js";import"./sweetalert2.all-whvPKlQA.js";const B={data(){return{isImgArr:!1,categories:["瑜珈","有氧運動","重量訓練"],coachs:["Emma","Alex","Dhalsim","Olivia Chang","Jackson Liu"],targets:["年長者","初學者","親子","進階","健力","復健","體態維持"],isAddingToCart:!1,editModal:{},dateDom:null}},methods:{...$(_,["getCourse","resetTemp","editCourse","getImgFile","uploadImg"])},computed:{...D(_,["temp","isEditingCourse","isAddingImg"]),checkedtargets(){return this.targets.map(t=>{const o=this.temp.target;let u=!1;return o&&o.forEach(b=>{b===t&&(u=!0)}),u})}},mounted(){this.editModal=new S(this.$refs.courseEditModal),this.editModal["_element"].addEventListener("hidden.bs.modal",()=>{this.resetTemp()}),this.dateDom=this.$refs.dueDate,T(this.dateDom,{minDate:"today",wrap:!0})}},N={ref:"courseEditModal",class:"modal fade",id:"courseEditModal",tabindex:"-1","aria-labelledby":"courseEditModalLabel","aria-hidden":"true"},F={class:"modal-dialog modal-xl modal-dialog-scrollable"},L={class:"modal-content"},P={class:"modal-header bg-linear py-3"},O={class:"modal-title fs-6 fs-sm-5 fw-medium text-white",id:"productModal"},R={class:"modal-body p-5 px-xl-6"},j={class:"container-fluid"},q={class:"row admin-form gx-6"},z={class:"col-lg-7 mb-3 mb-lg-0"},J={class:"row g-3"},G={class:"col-xl-6"},H={class:"row g-1 align-items-center"},K=s("label",{for:"title",class:"col-2 col-xl-3 form-label"},"課程標題",-1),Q={class:"col"},W={class:"col-xl-6"},X={class:"row g-1 align-items-center"},Y=s("label",{for:"category",class:"col-2 form-label"},"分類",-1),Z={class:"col"},ss=s("option",{value:"",disabled:"",hidden:""},"選擇課程分類",-1),ts=["value"],es={class:"col-xl-6"},os={class:"row g-1 align-items-center",ref:"dueDate"},ls=s("label",{for:"time",class:"col-2 col-xl-3 form-label"},"上課日期",-1),is={class:"col input-group input-group-sm"},ns=s("button",{class:"btn btn-light",type:"button","data-toggle":""},[s("i",{class:"bi bi-calendar-plus"})],-1),as=s("button",{class:"btn btn-outline-gray-4 rounded-end-1 text-dark",type:"button","data-clear":""},[s("i",{class:"bi bi-x-lg"})],-1),ds={class:"col-xl-6"},cs={class:"row g-1 align-items-center"},rs=s("label",{for:"coach",class:"col-2 form-label"},"教練",-1),ms={class:"col"},ps=s("option",{value:"",disabled:"",hidden:""},"選擇開課教練",-1),us=["value"],hs={class:"col-xl-6"},gs={class:"row g-1 align-items-center"},_s=s("label",{for:"origin_price",class:"col-2 form-label"},"原價",-1),bs={class:"col input-group input-group-sm"},fs=s("span",{class:"input-group-text fs-8",style:{"letter-spacing":"0px"}},"NTD",-1),vs={class:"col-xl-6"},ys={class:"row g-1 align-items-center"},ws=s("label",{for:"price",class:"col-2 form-label"},"售價",-1),$s={class:"col input-group input-group-sm"},ks=s("span",{class:"input-group-text",style:{"letter-spacing":"0px"}},"NTD",-1),Cs=s("hr",{class:"mt-5"},null,-1),Ms={class:"col-md-12 mt-2"},xs={class:"row g-1"},Ds=s("label",{class:"col-3 col-md-2 form-label",style:{"padding-top":"2px"}}," 推薦對象 ",-1),Us={class:"col d-flex flex-wrap"},Es=["checked","value","onUpdate:modelValue","id"],Is=["for"],Ss=s("hr",{class:"mt-5 mb-2"},null,-1),Vs={class:"col-md-12"},As={class:"row g-1 align-items-center"},Ts=s("label",{for:"content",class:"col-3 col-md-2 form-label"},"課程簡述",-1),Bs={class:"col"},Ns={class:"col-md-12"},Fs={class:"row g-1"},Ls=s("label",{for:"description",class:"col-3 col-md-2 form-label"},"課程描述",-1),Ps={class:"col"},Os={class:"col-lg-5 d-flex flex-column"},Rs=s("label",{for:"img",class:"form-label mb-2"},"課程圖片",-1),js={class:"position-relative mb-2",style:{height:"180px"}},qs=["src"],zs={class:"img-mask d-flex border"},Js={key:0,class:"mx-auto my-auto"},Gs=s("span",{class:"icon-base icon-trash icon-sm"},null,-1),Hs=[Gs],Ks={class:"row g-2 mb-4"},Qs={class:"position-relative"},Ws=["src","alt"],Xs=s("div",{class:"img-mask"},null,-1),Ys=["onClick"],Zs=s("span",{class:"icon-base icon-trash icon-sm"},null,-1),st=[Zs],tt={class:"form-check form-switch mb-2"},et={class:"form-label",for:"imageSwitch"},ot={class:"input-group input-group-sm"},lt=["disabled"],it={key:0,class:"line-loading-loop bg-white"},nt={key:1},at={class:"mt-auto ms-md-auto"},dt={class:"form-check mt-5"},ct=s("label",{for:"is_enabled",class:"form-label"},"上架課程",-1),rt={class:"modal-footer border-0 shadow shadow-top"},mt=s("button",{type:"button",class:"btn btn-sm btn-outline-gray-3 flex-grow-1 flex-lg-grow-0 me-2","data-bs-dismiss":"modal"}," 關閉視窗 ",-1),pt=["disabled"],ut={class:"line-loading-loop bg-white"};function ht(t,o,u,b,c,f){return l(),i("div",N,[s("div",F,[s("div",L,[s("div",P,[s("h3",O,a(t.temp.id?"編輯課程":"新增課程"),1)]),s("div",R,[s("div",j,[s("form",q,[s("div",z,[s("div",J,[s("div",G,[s("div",H,[K,s("div",Q,[d(s("input",{type:"text",id:"title",class:"form-control form-control-sm",placeholder:"請輸入標題","onUpdate:modelValue":o[0]||(o[0]=e=>t.temp.title=e)},null,512),[[m,t.temp.title]])])])]),s("div",W,[s("div",X,[Y,s("div",Z,[d(s("select",{class:"form-select form-select-sm",id:"category","onUpdate:modelValue":o[1]||(o[1]=e=>t.temp.category=e)},[ss,(l(!0),i(p,null,h(c.categories,e=>(l(),i("option",{value:e,key:e},a(e),9,ts))),128))],512),[[E,t.temp.category]])])])]),s("div",es,[s("div",os,[ls,s("div",is,[d(s("input",{type:"text",id:"time",class:"form-control",placeholder:"請輸入上課日期","onUpdate:modelValue":o[2]||(o[2]=e=>t.temp.time=e),"data-input":""},null,512),[[m,t.temp.time]]),ns,as])],512)]),s("div",ds,[s("div",cs,[rs,s("div",ms,[d(s("select",{class:"form-select form-select-sm",id:"coach","onUpdate:modelValue":o[3]||(o[3]=e=>t.temp.coach=e)},[ps,(l(!0),i(p,null,h(c.coachs,e=>(l(),i("option",{value:e,key:e},a(e),9,us))),128))],512),[[E,t.temp.coach]])])])]),s("div",hs,[s("div",gs,[_s,s("div",bs,[fs,d(s("input",{type:"number",id:"origin_price",class:"form-control form-control-sm",placeholder:"請輸入原價","onUpdate:modelValue":o[4]||(o[4]=e=>t.temp.origin_price=e),min:"0"},null,512),[[m,t.temp.origin_price,void 0,{number:!0}]])])])]),s("div",vs,[s("div",ys,[ws,s("div",$s,[ks,d(s("input",{type:"number",id:"price",class:"form-control form-control-sm",placeholder:"請輸入售價","onUpdate:modelValue":o[5]||(o[5]=e=>t.temp.price=e),min:"0"},null,512),[[m,t.temp.price,void 0,{number:!0}]])])])]),Cs,s("div",Ms,[s("div",xs,[Ds,s("div",Us,[(l(!0),i(p,null,h(c.targets,(e,r)=>(l(),i("div",{class:w(["form-check me-2",{"mb-0":r>4}]),key:e},[d(s("input",{class:"form-check-input",checked:f.checkedtargets[r],value:e,"onUpdate:modelValue":v=>t.temp.target=v,type:"checkbox",id:`target${r}`},null,8,Es),[[k,t.temp.target]]),s("label",{class:"form-label",for:`target${r}`},a(e),9,Is)],2))),128))])])]),Ss,s("div",Vs,[s("div",As,[Ts,s("div",Bs,[d(s("input",{type:"text",id:"content",class:"form-control form-control-sm",placeholder:"請輸入課程簡述","onUpdate:modelValue":o[6]||(o[6]=e=>t.temp.content=e)},null,512),[[m,t.temp.content]])])])]),s("div",Ns,[s("div",Fs,[Ls,s("div",Ps,[d(s("textarea",{id:"description",class:"form-control form-control-sm",placeholder:"請輸入課程描述",style:{height:"121px"},"onUpdate:modelValue":o[7]||(o[7]=e=>t.temp.description=e)},null,512),[[m,t.temp.description]])])])])])]),s("div",Os,[Rs,s("div",js,[t.temp.imageUrl?(l(),i("img",{key:0,src:t.temp.imageUrl,alt:"主要圖片",class:"img-fluid w-100 h-100 rounded-2"},null,8,qs)):y("",!0),s("div",zs,[t.temp.imageUrl?y("",!0):(l(),i("p",Js,"缺少主要圖片"))]),t.temp.imageUrl?(l(),i("button",{key:1,type:"button",class:"admin-img-delBtn btn btn-outline-danger btn-sm position-absolute",style:{top:"8px",right:"8px"},onClick:o[8]||(o[8]=e=>t.temp.imageUrl="")},Hs)):y("",!0)]),s("div",Ks,[t.temp.imagesUrl?(l(!0),i(p,{key:0},h(t.temp.imagesUrl,(e,r)=>(l(),i("div",{class:"col-4",key:r},[s("div",Qs,[d(s("img",{src:e,alt:"新增圖片"+(r+1),class:"w-100 rounded-2",style:{height:"100px"}},null,8,Ws),[[x,e]]),Xs,s("button",{type:"button",class:"admin-img-delBtn btn btn-outline-danger btn-sm position-absolute",style:{top:"4px",right:"4px"},onClick:v=>t.temp.imagesUrl.splice(r,1)},st,8,Ys)])]))),128)):y("",!0)]),s("div",tt,[d(s("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"imageSwitch","onUpdate:modelValue":o[9]||(o[9]=e=>c.isImgArr=e)},null,512),[[k,c.isImgArr]]),s("label",et,a(c.isImgArr?"新增到圖片集":"更新主要圖片"),1)]),s("div",ot,[s("input",{type:"file",id:"img",ref:"fileInput",class:"form-control form-control-sm",onChange:o[10]||(o[10]=(...e)=>t.getImgFile&&t.getImgFile(...e))},null,544),s("button",{class:"btn btn-outline-gray-3 ls-2",type:"button",onClick:o[11]||(o[11]=e=>t.uploadImg(c.isImgArr,t.$refs.fileInput)),disabled:t.isAddingImg},[t.isAddingImg?(l(),i("span",it)):(l(),i("span",nt,"新增圖片"))],8,lt)]),s("div",at,[s("div",dt,[d(s("input",{type:"checkbox",id:"is_enabled",class:"form-check-input","onUpdate:modelValue":o[12]||(o[12]=e=>t.temp.is_enabled=e),"true-value":"1","false-value":"0"},null,512),[[k,t.temp.is_enabled]]),ct])])])])])]),s("div",rt,[mt,s("button",{type:"button",class:"btn btn-sm btn-gray-1 flex-grow-1 flex-lg-grow-0",onClick:o[13]||(o[13]=e=>t.editCourse(t.temp.id,c.editModal)),disabled:t.isEditingCourse},[d(s("span",ut,null,512),[[x,t.isEditingCourse]]),g(" "+a(t.temp.id?"更新課程":"新增課程"),1)],8,pt)])])])],512)}const gt=U(B,[["render",ht]]),_t={data(){return{delModal:null}},methods:{...$(_,["delCourse"])},computed:{...D(_,["temp","isEditingCourse"])},mounted(){this.delModal=new S(this.$refs.courseDelModal)}},bt={class:"modal fade",ref:"courseDelModal",id:"courseDelModal",tabindex:"-1"},ft={class:"modal-dialog"},vt={class:"modal-content"},yt=s("div",{class:"modal-header bg-linear-danger py-3"},[s("h3",{class:"modal-title fs-6 fs-sm-5 fw-medium text-white"},"刪除課程")],-1),wt={class:"modal-body p-5"},$t={class:"container-fluid"},kt={class:"row"},Ct=s("h4",{class:"fs-6"},"確定要刪除課程？",-1),Mt={class:"col-sm-7"},xt={class:"list-group list-group-flush small"},Dt={class:"list-group-item px-0"},Ut={class:"list-group-item px-0"},Et={class:"ls-0"},It={class:"list-group-item px-0"},St={class:"ls-0"},Vt={class:"col-sm-5"},At={class:"position-relative mx-7 mx-sm-0",style:{height:"140px"}},Tt=["src","alt"],Bt=s("div",{class:"img-mask"},null,-1),Nt={class:"modal-footer border-0 shadow shadow-top"},Ft=s("button",{type:"button",class:"btn btn-sm btn-outline-gray-3 flex-grow-1 flex-md-grow-0 me-2","data-bs-dismiss":"modal"}," 關閉視窗 ",-1),Lt=["disabled"],Pt={class:"line-loading-loop bg-white"};function Ot(t,o,u,b,c,f){return l(),i("div",bt,[s("div",ft,[s("div",vt,[yt,s("div",wt,[s("div",$t,[s("div",kt,[Ct,s("div",Mt,[s("ul",xt,[s("li",Dt,"課程名稱："+a(t.temp.title),1),s("li",Ut,[g(" 課程編號： "),s("span",Et,a(t.temp.id),1)]),s("li",It,[g(" 開課日期： "),s("span",St,a(t.temp.time),1)])])]),s("div",Vt,[s("div",At,[s("img",{src:t.temp.imageUrl,alt:t.temp.title,class:"img-fluid w-100 h-100 rounded-2"},null,8,Tt),Bt])])])])]),s("div",Nt,[Ft,s("button",{type:"button",class:"btn btn-danger btn-sm flex-grow-1 flex-md-grow-0",onClick:o[0]||(o[0]=e=>t.delCourse(t.temp.id,c.delModal)),disabled:t.isEditingCourse},[d(s("span",Pt,null,512),[[x,t.isEditingCourse]]),g(" 確認刪除 ")],8,Lt)])])])],512)}const Rt=U(_t,[["render",Ot]]),jt={components:{PaginationComponent:A,CourseEditModal:gt,CourseDelModal:Rt},props:["haveToken"],data(){return{url:"",path:"",courses:[],pageInfo:{},badgeStyles:{yoga:"bg-primary bg-opacity-50",strength:"bg-gray-1 bg-opacity-50",cardio:"bg-secondary"},yoga:"bg-primary bg-opacity-50"}},methods:{...$(I,["getRemoteData"]),...$(_,["getCourse"]),chooseBadgeStyle(t){switch(t){case"瑜珈":return this.badgeStyles.yoga;case"重量訓練":return this.badgeStyles.strength;case"有氧運動":return this.badgeStyles.cardio;default:return""}}},computed:{...D(I,["targetData"])},watch:{targetData(t){this.courses=t}},mounted(){this.getRemoteData("products",1,!1)}},qt={class:"container"},zt=s("h2",{class:"fs-3 fw-normal ls-0 mb-md-0 text-center"},[s("span",null,"課程管理")],-1),Jt=s("div",{class:"text-center text-md-end mb-3"},[s("button",{type:"button",class:"btn btn-gray-3 py-1 shadow-sm","data-bs-toggle":"modal","data-bs-target":"#courseEditModal"},[s("span",{class:"icon-base icon-sm icon-add me-1 bg-white align-text-top"}),s("span",null,"新增課程")])],-1),Gt={key:0,class:"table-responsive mb-5"},Ht={class:"table table-hover text-center align-middle ls-0",style:{"min-width":"720px"}},Kt=s("thead",null,[s("tr",{class:"table-gray-4"},[s("th",{scope:"col",width:"52px"}),s("th",{scope:"col",class:"d-none d-lg-table-cell"},"縮圖"),s("th",{scope:"col"},"分類"),s("th",{scope:"col"},"標題"),s("th",{scope:"col"},"教練"),s("th",{scope:"col"},"上課時間"),s("th",{scope:"col"},"售價"),s("th",{scope:"col",width:"90px"},"開課狀況"),s("th",{scope:"col",width:"75px"})])],-1),Qt=["onClick"],Wt=s("span",{class:"icon-base icon-sm icon-trash"},null,-1),Xt=[Wt],Yt={class:"d-none d-lg-table-cell"},Zt=["src","alt"],se={class:"fs-7 fs-lg-6"},te={class:"small fs-lg-7 fw-normal mb-0"},ee={class:"fs-8 fs-lg-7"},oe={class:"fs-8 fs-lg-7 ls-0"},le={class:"fw-semibold"},ie={class:"fs-7 fs-lg-6"},ne=["onClick"],ae={key:1},de=s("h2",{class:"fs-6 fw-light text-center"},[s("span",{class:"line-loading-loop bg-gray-3 align-top"}),g(" 資料讀取中請稍後 ")],-1),ce=[de];function re(t,o,u,b,c,f){const e=M("PaginationComponent"),r=M("CourseEditModal"),v=M("CourseDelModal");return l(),i(p,null,[s("div",qt,[zt,Jt,c.courses.length!==0?(l(),i("div",Gt,[s("table",Ht,[Kt,s("tbody",null,[(l(!0),i(p,null,h(c.courses,n=>(l(),i("tr",{key:n.id},[s("td",null,[s("button",{type:"button",class:"btn btn-sm btn-outline-danger border-0 p-1","data-bs-toggle":"modal","data-bs-target":"#courseDelModal",onClick:V=>t.getCourse(n.id)},Xt,8,Qt)]),s("td",Yt,[s("img",{src:n.imageUrl,alt:n.title,style:{width:"120px",height:"80px"}},null,8,Zt)]),s("td",null,[s("p",se,[s("span",{class:w(["badge",f.chooseBadgeStyle(n.category)])},a(n.category),3)])]),s("td",null,[s("h3",te,a(n.title),1)]),s("td",ee,a(n.coach),1),s("td",oe,a(n.time),1),s("td",le,[s("span",{class:w({"text-danger ":n.price<n.origin_price})},a(n.price),3)]),s("td",null,[s("p",ie,[s("span",{class:w(["badge",{"bg-success":n.is_enabled,"bg-danger":!n.is_enabled}])},a(n.is_enabled?"上架中":"已下架"),3)])]),s("td",null,[s("button",{type:"button",class:"btn btn-sm py-1 btn-outline-dark fw-normal","data-bs-toggle":"modal","data-bs-target":"#courseEditModal",onClick:V=>t.getCourse(n.id)}," 編輯 ",8,ne)])]))),128))])])])):(l(),i("div",ae,ce)),C(e,{"now-target":"products","is-user":!1})]),C(r),C(v)],64)}const fe=U(jt,[["render",re]]);export{fe as default};

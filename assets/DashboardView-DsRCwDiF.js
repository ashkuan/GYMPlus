import{_ as v,a as g,m as f,c as k,b as s,n as r,g as y,d as t,w as n,e as x,l as w,O as C,h as i,F as L,r as h,o as S}from"./index-d6ePCIf6.js";import{A as p}from"./AlertStore-t-u7Dtg6.js";import"./sweetalert2.all-whvPKlQA.js";const A={data(){return{url:"",isColse:!1,isLoading:!1,haveToken:!1}},methods:{...g(p,["basicContent","closedAction"]),checkIdentity(){const e=this.$loading.show();this.axios.post(`${this.url}/api/user/check`).then(a=>{e.hide();const{success:c,message:m}=a.data;c||this.alertStyles.basic.fire({...this.basicContent(m.replace(", ","，"),2),...this.closedAction("replace","admin-login")})}).catch(a=>{e.hide();const{message:c}=a.response.data;this.alertStyles.basic.fire({...this.basicContent(`${c.replace(", ","，")}`,2),...this.closedAction("replace","admin-login")})})},logout(){this.isLoading=!this.isLoading,this.axios.post(`${this.url}/logout`).then(e=>{this.isLoading=!this.isLoading,this.alertStyles.basic.fire({...this.basicContent(e.data.message,1),...this.closedAction("replace","admin-login")})}).catch(e=>{this.isLoading=!this.isLoading,this.alertStyles.basic.fire(this.basicContent(`錯誤${e.response.status}，請洽客服`,2))})}},computed:{...f(p,["alertStyles"]),sidebarWidth(){return this.isColse?0:260}},created(){this.url="https://vue3-course-api.hexschool.io/v2/";const e=document.cookie.replace(/(?:(?:^|.*;\s*)adminToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=e,this.checkIdentity()}},$=s("h1",{class:"logo mb-0",style:{width:"105px",height:"60px"}},"GYMPlus",-1),z={class:"nav nav-pills flex-column align-items-stretch w-100 mt-6"},T={class:"nav-item"},V=s("span",{class:"icon-base icon-lesson me-1"},null,-1),B={class:"nav-item"},H=s("span",{class:"icon-base icon-order me-1"},null,-1),N={class:"nav-item"},j=s("span",{class:"icon-base icon-coupon me-1"},null,-1),D={class:"nav-item"},F=s("span",{class:"icon-base icon-pen me-1"},null,-1),I={class:"nav-item"},M=s("span",{class:"icon-base icon-customer-server me-1"},null,-1),R={class:"mb-6 shadow-sm"},W={class:"navbar navbar-expand-md navbar-light"},E={class:"container-fluid justify-content-end"},G=s("button",{class:"menu-btn btn border-0 rounded-0 p-0 align-bottom d-md-none collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#adminHeader","aria-controls":"adminHeader","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"icon-base menu-icon"})],-1),O={class:"collapse navbar-collapse justify-content-end",id:"adminHeader",style:{margin:"0 -12px"}},P={class:"navbar-nav text-center fs-7 py-3 me-md-1"},Y={class:"nav-item mb-2 mb-md-0 mx-md-3"},q=s("span",{class:"icon-base icon-bell me-1"},null,-1),J=s("span",null,"客服訊息",-1),K={class:"nav-item mb-2 mb-md-0 mx-md-3"},Q={class:"nav-item mx-md-3"},U={class:"line-loading-loop bg-primary"},X={class:"contaner"};function Z(e,a,c,m,o,d){const _=h("router-link"),l=h("RouterLink"),b=h("router-view");return S(),k(L,null,[s("button",{type:"button",class:"admin-sidebar-btn btn btn-secondary rounded-start z-1 shadow",style:y(`left: ${d.sidebarWidth-4}px`),onClick:a[0]||(a[0]=u=>o.isColse=!o.isColse)},[s("span",{class:r(["icon-base icon-d-arrow bg-white",{hide:o.isColse}])},null,2)],4),s("div",{class:r(["admin-sidebar bg-light",{hide:o.isColse}])},[t(_,{to:"/",class:"mb-2"},{default:n(()=>[$]),_:1}),s("ul",z,[s("li",T,[t(l,{to:"/admin",class:"nav-link"},{default:n(()=>[V,i(" 課程列表 ")]),_:1})]),s("li",B,[t(l,{to:"/admin/orders",class:"nav-link"},{default:n(()=>[H,i(" 訂單列表 ")]),_:1})]),s("li",N,[t(l,{to:"/admin/coupons",class:"nav-link"},{default:n(()=>[j,i(" 優惠券 ")]),_:1})]),s("li",D,[t(l,{to:"/admin/articles",class:"nav-link"},{default:n(()=>[F,i(" 文章列表 ")]),_:1})]),s("li",I,[t(l,{to:"/admin/customer-service",class:"nav-link w-100"},{default:n(()=>[M,i(" 客服專區 ")]),_:1})])])],2),s("div",{class:r(["main-view",{shrink:!o.isColse}])},[s("header",R,[s("nav",W,[s("div",E,[G,s("div",O,[s("ul",P,[s("li",Y,[t(l,{to:"/admin/customer-service",class:"nav-link link-gray-1"},{default:n(()=>[q,J]),_:1})]),s("li",K,[t(_,{to:"/",class:"nav-link link-gray-1"},{default:n(()=>[i("返回前台")]),_:1})]),s("li",Q,[s("a",{class:"nav-link link-gray-1",href:"#",onClick:a[1]||(a[1]=x((...u)=>d.logout&&d.logout(...u),["prevent"]))},[w(s("span",U,null,512),[[C,o.isLoading]]),i(" 管理者登出 ")])])])])])])]),s("div",X,[t(b)])],2)],64)}const as=v(A,[["render",Z]]);export{as as default};
